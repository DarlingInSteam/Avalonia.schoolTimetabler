using System.Collections.Generic;using System.Collections.ObjectModel;using Avalonia.Collections;using Data.Repositories;using Data.Repository;using Domain.Entities;using Domain.UseCases;using ReactiveUI;namespace SchoolTimetabler.ViewModels;public class SchoolInfoViewModel : ViewModelBase, IRoutableViewModel, IScreen{    private string? _countClasses;    private string? _countTeacher;    private AvaloniaList<string> _disciplinesName;    private string? _fullName;    private string? _fullNameDirector;    private bool _isVisibleCabinets;    private bool _isVisiBleClsses;    private bool _isVisibleDataGridTeachers;    private bool _isVisiBleDiscipline;    private bool _isVisiBleTeachers;    private bool _isVisibleSchoolInfo = false;    private string? _post;    private string? _schoolNumber;    private int _selectedIndexComboBox;    private int _selectedIndexComboBoxTeachers;    private readonly TeacherInteractor _teacherInteractor;    public SchoolInfoViewModel(MainWindowViewModel mainWindowViewModel)    {        var schoolInfoInteractor = new SchoolInfoInteractor(SchoolRepository.GetInstance());        var userInteractor = new UserInteractor(UserRepository.GetInstance());        var classInteractor = new ClassInteractor(ClassesRepository.GetInstance());        var disciplineInteractor = new DisciplineInteractor(DisciplineRepository.GetInstance());        var cabinetInteractor = new CabinetInteractor(CabinetsRepository.GetInstance());        _teacherInteractor = new TeacherInteractor(TeacherRepository.GetInstance());        TeachersName = new ObservableCollection<string>();        Teachers = new ObservableCollection<Teacher>(_teacherInteractor.GetTeachers());        Classes = new ObservableCollection<Class>(classInteractor.GetClasses());        Disciplines = new ObservableCollection<Discipline>(disciplineInteractor.GetDisciplines());        _disciplinesName = new AvaloniaList<string>();        Cabinets = new ObservableCollection<Cabinet>(cabinetInteractor.GetCabinets());        Post = userInteractor.UserGet().Post;        FullName = userInteractor.UserGet().FullName;        SchoolNumber = schoolInfoInteractor.SchoolInfoGet().SchoolNumber;        FullNameDirector = schoolInfoInteractor.SchoolInfoGet().FullNameDirector;        CountClasses = schoolInfoInteractor.SchoolInfoGet().CountClasses;        CountTeacher = schoolInfoInteractor.SchoolInfoGet().CountTeachers;        if (Teachers.Count != 0)        {            TeachersName.Clear();            foreach (var t in Teachers) TeachersName.Add(t.TeacherFullName);            DisciplinesName.Clear();            var buf = new List<string>();            buf = _teacherInteractor.GetTeacherDisciplines(_selectedIndexComboBoxTeachers);            foreach (var t in buf) DisciplinesName.Add(t);        }    }    public ObservableCollection<Class> Classes { get; }    public ObservableCollection<Cabinet> Cabinets { get; }    public ObservableCollection<Discipline> Disciplines { get; }    public ObservableCollection<Teacher> Teachers { get; }    public ObservableCollection<string> TeachersName { get; set; }    public AvaloniaList<string> DisciplinesName    {        get => _disciplinesName;        set => this.RaiseAndSetIfChanged(ref _disciplinesName, value);    }    public bool IsVisibleCabinets    {        set => this.RaiseAndSetIfChanged(ref _isVisibleCabinets, value);        get => _isVisibleCabinets;    }    public bool IsVisibleSchoolInfo    {        set => this.RaiseAndSetIfChanged(ref _isVisibleCabinets, value);        get => _isVisibleCabinets;    }        public bool IsVisibleClasses    {        set => this.RaiseAndSetIfChanged(ref _isVisiBleClsses, value);        get => _isVisiBleClsses;    }    public bool IsVisibleDataGridTeachers    {        set => this.RaiseAndSetIfChanged(ref _isVisibleDataGridTeachers, value);        get => _isVisibleDataGridTeachers;    }    public bool IsVisibleDiscipline    {        set => this.RaiseAndSetIfChanged(ref _isVisiBleDiscipline, value);        get => _isVisiBleDiscipline;    }    public int SelectedIndexComboBoxTeachers    {        set        {            this.RaiseAndSetIfChanged(ref _selectedIndexComboBoxTeachers, value);            IsVisibleDataGridTeachers = false;            OutputTeacher();        }        get => _selectedIndexComboBoxTeachers;    }    public bool IsVisibleTeachers    {        set => this.RaiseAndSetIfChanged(ref _isVisiBleTeachers, value);        get => _isVisiBleTeachers;    }    public string? SchoolNumber    {        get => _schoolNumber;        set => this.RaiseAndSetIfChanged(ref _schoolNumber, value);    }    public string? Post    {        get => _post;        set => this.RaiseAndSetIfChanged(ref _post, value);    }    public string? FullName    {        get => _fullName;        set => this.RaiseAndSetIfChanged(ref _fullName, value);    }    public string? FullNameDirector    {        get => _fullNameDirector;        set => this.RaiseAndSetIfChanged(ref _fullNameDirector, value);    }    public string? CountClasses    {        get => _countClasses;        set => this.RaiseAndSetIfChanged(ref _countClasses, value);    }    public string? CountTeacher    {        get => _countTeacher;        set => this.RaiseAndSetIfChanged(ref _countTeacher, value);    }    public string? UrlPathSegment { get; }    public IScreen HostScreen { get; }    public RoutingState Router { get; }    private void OutputTeacher()    {        DisciplinesName.Clear();        var buf = new List<string>();        buf = _teacherInteractor.GetTeacherDisciplines(_selectedIndexComboBoxTeachers);        foreach (var t in buf) DisciplinesName.Add(t);        IsVisibleDataGridTeachers = true;    }    public void OutputTeachers()    {        TeachersName.Clear();        foreach (var t in Teachers) TeachersName.Add(t.TeacherFullName);        IsVisibleTeachers = true;        IsVisibleDiscipline = false;        IsVisibleClasses = false;        IsVisibleCabinets = false;    }    public void OutputCabinets()    {        IsVisibleDiscipline = false;        IsVisibleDataGridTeachers = false;        IsVisibleTeachers = false;        IsVisibleClasses = false;        IsVisibleCabinets = false;        IsVisibleCabinets = true;    }    public void OutputClasses()    {        IsVisibleDiscipline = false;        IsVisibleDataGridTeachers = false;        IsVisibleTeachers = false;        IsVisibleCabinets = false;        IsVisibleClasses = true;    }    public void OutputDisciplines()    {        IsVisibleClasses = false;        IsVisibleDataGridTeachers = false;        IsVisibleTeachers = false;        IsVisibleCabinets = false;        IsVisibleDiscipline = true;    }}