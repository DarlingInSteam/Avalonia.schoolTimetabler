using System.Collections.Generic;using System.Collections.ObjectModel;using Avalonia.Collections;using Data.Repositories;using Domain.Entities;using Domain.UseCases;using ReactiveUI;using ReactiveUI.Fody.Helpers;namespace SchoolTimetabler.ViewModels;public class SchoolInfoViewModel : ViewModelBase, IRoutableViewModel, IScreen{    private readonly TeacherInteractor _teacherInteractor;    private AvaloniaList<string> _disciplinesName;    private int _selectedIndexComboBoxTeachers;    public SchoolInfoViewModel(MainWindowViewModel mainWindowViewModel)    {        var schoolInfoInteractor = new SchoolInfoInteractor(SchoolRepository.GetInstance());        var userInteractor = new UserInteractor(UserRepository.GetInstance());        var classInteractor = new ClassInteractor(ClassesRepository.GetInstance());        var disciplineInteractor = new DisciplineInteractor(DisciplineRepository.GetInstance());        var cabinetInteractor = new CabinetInteractor(CabinetsRepository.GetInstance());        _teacherInteractor = new TeacherInteractor(TeacherRepository.GetInstance());        TeachersName = new ObservableCollection<string>();        Teachers = new ObservableCollection<Teacher>(_teacherInteractor.GetTeachers());        Classes = new ObservableCollection<Class>(classInteractor.GetClasses());        Disciplines = new ObservableCollection<Discipline>(disciplineInteractor.GetDisciplines());        _disciplinesName = new AvaloniaList<string>();        Cabinets = new ObservableCollection<Cabinet>(cabinetInteractor.GetCabinets());        Post = userInteractor.UserGet().Post;        FullName = userInteractor.UserGet().FullName;        SchoolNumber = schoolInfoInteractor.SchoolInfoGet().SchoolNumber;        FullNameDirector = schoolInfoInteractor.SchoolInfoGet().FullNameDirector;        CountClasses = schoolInfoInteractor.SchoolInfoGet().CountClasses;        CountTeacher = schoolInfoInteractor.SchoolInfoGet().CountTeachers;        if (Teachers.Count != 0)        {            TeachersName.Clear();            foreach (var t in Teachers) TeachersName.Add(t.TeacherFullName);            DisciplinesName.Clear();            var buf = new List<string>();            buf = _teacherInteractor.GetTeacherDisciplines(_selectedIndexComboBoxTeachers);            foreach (var t in buf) DisciplinesName.Add(t);        }    }    [Reactive] public string? CountClasses { get; set; }    [Reactive] public string? CountTeacher { get; set; }    [Reactive] public string? FullName { get; set; }    [Reactive] public string? FullNameDirector { get; set; }    [Reactive] public string? Post { get; set; }    [Reactive] public string? SchoolNumber { get; set; }    public ObservableCollection<Class> Classes { get; }    public ObservableCollection<Cabinet> Cabinets { get; }    public ObservableCollection<Discipline> Disciplines { get; }    public ObservableCollection<Teacher> Teachers { get; }    public ObservableCollection<string> TeachersName { get; set; }    public AvaloniaList<string> DisciplinesName    {        get => _disciplinesName;        set => this.RaiseAndSetIfChanged(ref _disciplinesName, value);    }    public int SelectedIndexComboBoxTeachers    {        set        {            this.RaiseAndSetIfChanged(ref _selectedIndexComboBoxTeachers, value);            OutputTeacher();        }        get => _selectedIndexComboBoxTeachers;    }    public string? UrlPathSegment { get; }    public IScreen HostScreen { get; }    public RoutingState Router { get; }    private void OutputTeacher()    {        DisciplinesName.Clear();        var buf = new List<string>();        buf = _teacherInteractor.GetTeacherDisciplines(_selectedIndexComboBoxTeachers);        foreach (var t in buf) DisciplinesName.Add(t);    }}